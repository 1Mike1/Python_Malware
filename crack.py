import os
from cryptography.fernet import Fernet

def get_all_files(dir=os.getcwd()):
	files_list = []
	for i in os.listdir(dir):
		if i=='hack.py' or i=='key.txt' or i=='crack.py':continue
		elif os.path.isfile(i):
			files_list.append(i)
	return files_list

def get_key():
	if os.path.exists('key.txt'):
		with open('key.txt') as file:
			_key = file.read()
	else:
		return None
	return Fernet(_key)

def crack(files=[]):
	_key = get_key()
	for file in files:
		with open(file, 'rb') as data:
			temp_data = data.read()
		hashed_data = _key.decrypt(temp_data)
		with open(file, 'wb') as _data:
			_data.write(hashed_data)
	return "\n\t!!!... Your files are restored ....!!!\n"

files = get_all_files()
print(crack(files))